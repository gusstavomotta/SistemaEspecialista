{% extends 'EscalaPoms/base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/perfil.css' %}">
{% endblock %}

{% block title %}Meu Perfil{% endblock %}

{% block content %}
<section class="perfil">
  <header class="header">
    <h1>Meu Perfil</h1>
  </header>

  <form method="POST" enctype="multipart/form-data" id="form-perfil">
    {% csrf_token %}

    <div class="photo-field">
      {% if usuario.foto %}
        <img src="{{ usuario.foto.url }}" alt="Foto de {{ usuario.nome }}" class="photo-preview">
        <button type="submit" name="remove_foto" value="1" class="remove-photo-btn">Remover Foto</button>
      {% else %}
        <img src="{% static 'images/teste.png' %}" alt="Foto padrÃ£o" class="photo-preview">
        <input type="file" name="foto" accept="image/*">
      {% endif %}
    </div>

    <div class="profile-field">
      <span class="label">Nome:</span>
      <span class="value">{{ usuario.nome }}</span>
    </div>
    <div class="profile-field">
      <span class="label">Email:</span>
      <input type="email" name="email" value="{{ usuario.email }}" required>
    </div>
    <div class="profile-field">
      <span class="label">Telefone:</span>
      <input type="text" name="telefone" value="{{ usuario.num_telefone }}" required>
    </div>

    <div class="profile-actions" style="margin-top: 1em;">
      <button type="submit" class="btn-success">Salvar Perfil</button>
    </div>
  </form>

  {% if usuario.treinador.ativo %}
  <div class="profile-section" style="margin-top: 1.5em;">
    <h2 class="section-title">Treinador Atual</h2>

    <div class="profile-field">
      <span class="label">Nome:</span>
      <span class="value">{{ usuario.treinador.nome }}</span>
    </div>
    <div class="profile-field">
      <span class="label">Email:</span>
      <span class="value">{{ usuario.treinador.email }}</span>
    </div>
    <div class="profile-field">
      <span class="label">Telefone:</span>
      <span class="value">{{ usuario.treinador.num_telefone }}</span>
    </div>
  </div>
{% endif %}


</section>
{% endblock %}
